<script>

function $( a ) { document.write( a ); }
function _( a ) { return document.getElementById( a ); }

$( '<table>' );
for( var i = 0; i < 6; ++ i )
{
  $( '<tr>' );
  for( var j = 0; j < 6; ++ j )
  {
    $( '<td id=v' + i + '' + j + ' align=center valign=center style="width:48px;height:48px;border:1px solid black">&nbsp;</td>' );
  }
  $( '</tr>' );
}
$( '</table>' );
$( '<div id=moo>&nbsp;</div>' );
$( '<br><br>Сервис сделала персонаж <a href=http://g1.botva.ru/player.php?id=149370 target=_blank>Пумпа</a>!' );

var larr;
var lx, ly;
function advice( x, y, t, f, arr )
{
  lx = x; ly = y;
  larr = arr;
  _( 'moo' ).innerHTML = "Нажмите в ботве в помеченную желтым цветом клетку.<br>Какого цвета В БОТВЕ (а не здесь) клетки, помеченные знаком вопроса?<br><a href='javascript:step( " + t + ", 1 )'>Красные</a> <a href='javascript:step( " + f + ", 0 )'>Зеленые</a>";
  for( var i = 0; i < 6; ++ i )
    for( var j = 0; j < 6; ++ j )
    {
      _( 'v' + i + '' + j ).innerHTML = '&nbsp;';
    }
  _( 'v' + x + '' + y ).style.backgroundColor = 'yellow';
  for( qi in arr )
  {
    q = arr[qi];
    _( 'v' + q[0] + '' + q[1] ).innerHTML = '?';
  }
}

function step( id, red )
{
  if( id )
  {
    if( red ) for( qi in larr )
    {
	  _( 'v' + lx + '' + ly ).style.backgroundColor = 'red';
      q = larr[qi];
      _( 'v' + q[0] + '' + q[1] ).style.backgroundColor = 'red';
    }
    if( !red ) for( qi in larr )
    {
	  _( 'v' + lx + '' + ly ).style.backgroundColor = 'green';
      q = larr[qi];
      _( 'v' + q[0] + '' + q[1] ).style.backgroundColor = 'green';
    }
  }
  if( steps[id][0] == -1 )
  {
    _( 'v' + steps[id][1] + '' + steps[id][2] ).style.backgroundColor = 'gold';
    _( 'moo' ).innerHTML = 'УРА!!! Чревоточина в золотистой клетке, нажми ее скорее!';
  }
  else if( steps[id][0] == -2 )
  {
    _( 'moo' ).innerHTML = 'Мне очень жаль, но я не знаю, где чревоточина. Понадейся на удачу и нажми в любую не открытую клетку!';
  }
  else advice( steps[id][0], steps[id][1], steps[id][2], steps[id][3], steps[id][4] );
}

var steps = [
 [1, 1, 1, 2, [[0,1],[1,0],[2,1],[1,2]]],
 [0, 0, 3, 4, [[0,1],[1,0]]],
 [2, 2, 5, 6, [[2,3],[3,2]]],
 [0, 2, 7, 8, [[0,3],[1,2]]],
 [0, 2, 9, 10, [[0,3],[1,2]]],
 [2, 4, 11, 12, [[1,4],[3,4],[2,3],[2,5]]],
 [2, 0, 13, 14, [[3,0]]],
 [-1,0,1],
 [-1,1,0],
 [-1,1,2],
 [-1,2,1],
 [-1,2,3],
 [-1,3,2],
 [-1,3,0],
 [-2]
];

step( 0, 0 );

</script>